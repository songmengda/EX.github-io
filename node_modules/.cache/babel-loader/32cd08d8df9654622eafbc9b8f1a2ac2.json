{"remainingRequest":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/babel-loader/lib/index.js!/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/songmengda/Desktop/my/mygithub/EX.github-io/src/pages/xin.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/src/pages/xin.vue","mtime":1557753154880},{"path":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songmengda/Desktop/my/mygithub/EX.github-io/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.fill\";\n//\n//\n//\n//\n//\n//\n// import { queryCoupon } from '@/api/service.js'\nexport default {\n  components: {},\n  data: function data() {\n    return {};\n  },\n  mounted: function mounted() {\n    var settings = {\n      particles: {\n        length: 500,\n        //最大粒子数\n        duration: 2,\n        //粒子持续时间\n        velocity: 100,\n        //粒子速度，像素/秒\n        effect: -0.75,\n        size: 30 //粒子大小\n\n      }\n    };\n\n    (function () {\n      var b = 0;\n      var c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n\n      for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n        window.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n        window.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"];\n      }\n\n      if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function (h) {\n          var d = new Date().getTime();\n          var f = Math.max(0, 16 - (d - b));\n          var g = window.setTimeout(function () {\n            h(d + f);\n          }, f);\n          b = d + f;\n          return g;\n        };\n      }\n\n      if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function (d) {\n          clearTimeout(d);\n        };\n      }\n    })();\n\n    var Point = function () {\n      function Point(x, y) {\n        this.x = typeof x !== 'undefined' ? x : 0;\n        this.y = typeof y !== 'undefined' ? y : 0;\n      }\n\n      Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n      };\n\n      Point.prototype.length = function (length) {\n        if (typeof length == 'undefined') return Math.sqrt(this.x * this.x + this.y * this.y);\n        this.normalize();\n        this.x *= length;\n        this.y *= length;\n        return this;\n      };\n\n      Point.prototype.normalize = function () {\n        var length = this.length();\n        this.x /= length;\n        this.y /= length;\n        return this;\n      };\n\n      return Point;\n    }();\n\n    var Particle = function () {\n      function Particle() {\n        this.position = new Point();\n        this.velocity = new Point();\n        this.acceleration = new Point();\n        this.age = 0;\n      }\n\n      Particle.prototype.initialize = function (x, y, dx, dy) {\n        this.position.x = x;\n        this.position.y = y;\n        this.velocity.x = dx;\n        this.velocity.y = dy;\n        this.acceleration.x = dx * settings.particles.effect;\n        this.acceleration.y = dy * settings.particles.effect;\n        this.age = 0;\n      };\n\n      Particle.prototype.update = function (deltaTime) {\n        this.position.x += this.velocity.x * deltaTime;\n        this.position.y += this.velocity.y * deltaTime;\n        this.velocity.x += this.acceleration.x * deltaTime;\n        this.velocity.y += this.acceleration.y * deltaTime;\n        this.age += deltaTime;\n      };\n\n      Particle.prototype.draw = function (context, image) {\n        function ease(t) {\n          return --t * t * t + 1;\n        }\n\n        var size = image.width * ease(this.age / settings.particles.duration);\n        context.globalAlpha = 1 - this.age / settings.particles.duration;\n        context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n      };\n\n      return Particle;\n    }();\n\n    var ParticlePool = function () {\n      var particles,\n          firstActive = 0,\n          firstFree = 0,\n          duration = settings.particles.duration;\n\n      function ParticlePool(length) {\n        // 创建和填充粒子库\n        particles = new Array(length);\n\n        for (var i = 0; i < particles.length; i++) {\n          particles[i] = new Particle();\n        }\n      }\n\n      ParticlePool.prototype.add = function (x, y, dx, dy) {\n        particles[firstFree].initialize(x, y, dx, dy); // 处理循环队列\n\n        firstFree++;\n        if (firstFree == particles.length) firstFree = 0;\n        if (firstActive == firstFree) firstActive++;\n        if (firstActive == particles.length) firstActive = 0;\n      };\n\n      ParticlePool.prototype.update = function (deltaTime) {\n        var i; // 更新活动粒子\n\n        if (firstActive < firstFree) {\n          for (i = firstActive; i < firstFree; i++) {\n            particles[i].update(deltaTime);\n          }\n        }\n\n        if (firstFree < firstActive) {\n          for (i = firstActive; i < particles.length; i++) {\n            particles[i].update(deltaTime);\n          }\n\n          for (i = 0; i < firstFree; i++) {\n            particles[i].update(deltaTime);\n          }\n        } // 删除不活动的粒子\n\n\n        while (particles[firstActive].age >= duration && firstActive != firstFree) {\n          firstActive++;\n          if (firstActive == particles.length) firstActive = 0;\n        }\n      };\n\n      ParticlePool.prototype.draw = function (context, image) {\n        // 画活动粒子\n        if (firstActive < firstFree) {\n          for (var i = firstActive; i < firstFree; i++) {\n            particles[i].draw(context, image);\n          }\n        }\n\n        if (firstFree < firstActive) {\n          for (i = firstActive; i < particles.length; i++) {\n            particles[i].draw(context, image);\n          }\n\n          for (i = 0; i < firstFree; i++) {\n            particles[i].draw(context, image);\n          }\n        }\n      };\n\n      return ParticlePool;\n    }();\n\n    (function (canvas) {\n      var context = canvas.getContext('2d'),\n          particles = new ParticlePool(settings.particles.length),\n          particleRate = settings.particles.length / settings.particles.duration,\n          // particles/sec\n      time; // 获取heart点位 -PI <= t <= PI\n\n      function pointOnHeart(t) {\n        return new Point(160 * Math.pow(Math.sin(t), 3), 130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25);\n      } // 使用canvas创建粒子图像\n\n\n      var image = function () {\n        var canvas = document.createElement('canvas'),\n            context = canvas.getContext('2d');\n        canvas.width = settings.particles.size;\n        canvas.height = settings.particles.size; // 创建路径的辅助函数\n\n        function to(t) {\n          var point = pointOnHeart(t);\n          point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n          point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n          return point;\n        } // 创建路径\n\n\n        context.beginPath();\n        var t = -Math.PI;\n        var point = to(t);\n        context.moveTo(point.x, point.y);\n\n        while (t < Math.PI) {\n          t += 0.01;\n          point = to(t);\n          context.lineTo(point.x, point.y);\n        }\n\n        context.closePath(); // 填充\n\n        context.fillStyle = '#ea80b0';\n        context.fill(); // 创建图片\n\n        var image = new Image();\n        image.src = canvas.toDataURL();\n        return image;\n      }(); // 渲染\n\n\n      function render() {\n        requestAnimationFrame(render); // update time\n\n        var newTime = new Date().getTime() / 1000,\n            deltaTime = newTime - (time || newTime);\n        time = newTime; // clear canvas\n\n        context.clearRect(0, 0, canvas.width, canvas.height); // 创建新的粒子\n\n        var amount = particleRate * deltaTime;\n\n        for (var i = 0; i < amount; i++) {\n          var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n          var dir = pos.clone().length(settings.particles.velocity);\n          particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n        } // 更新并绘制\n\n\n        particles.update(deltaTime);\n        particles.draw(context, image);\n      } // 处理canvas大小\n\n\n      function onResize() {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n      }\n\n      window.onresize = onResize; // 延迟渲染\n\n      setTimeout(function () {\n        onResize();\n        render();\n      }, 10);\n    })(document.getElementById('pinkboard'));\n  },\n  computed: {},\n  methods: {}\n};",{"version":3,"sources":["xin.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"my-index\">\n    <canvas id=\"pinkboard\"></canvas>\n  </div>\n</template>\n\n<script>\n// import { queryCoupon } from '@/api/service.js'\nexport default {\n  components: {\n\n  },\n\n  data () {\n    return {\n    }\n  },\n\n  mounted () {\n\n    var settings = {\n      particles: {\n        length: 500, //最大粒子数\n        duration: 2, //粒子持续时间\n        velocity: 100, //粒子速度，像素/秒\n        effect: -0.75,\n        size: 30, //粒子大小\n      }\n    };\n    (function () {\n      var b = 0;\n      var c = [\"ms\", \"moz\", \"webkit\", \"o\"];\n      for (var a = 0; a < c.length && !window.requestAnimationFrame; ++a) {\n        window.requestAnimationFrame = window[c[a] + \"RequestAnimationFrame\"];\n        window.cancelAnimationFrame = window[c[a] + \"CancelAnimationFrame\"] || window[c[a] + \"CancelRequestAnimationFrame\"]\n      }\n      if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function (h) {\n          var d = new Date().getTime();\n          var f = Math.max(0, 16 - (d - b));\n          var g = window.setTimeout(function () {\n            h(d + f)\n          }, f);\n          b = d + f;\n          return g\n        }\n      }\n      if (!window.cancelAnimationFrame) {\n        window.cancelAnimationFrame = function (d) {\n          clearTimeout(d)\n        }\n      }\n    }());\n\n    var Point = (function () {\n      function Point (x, y) {\n        this.x = (typeof x !== 'undefined') ? x : 0;\n        this.y = (typeof y !== 'undefined') ? y : 0;\n      }\n      Point.prototype.clone = function () {\n        return new Point(this.x, this.y);\n      };\n      Point.prototype.length = function (length) {\n        if (typeof length == 'undefined')\n          return Math.sqrt(this.x * this.x + this.y * this.y);\n        this.normalize();\n        this.x *= length;\n        this.y *= length;\n        return this;\n      };\n      Point.prototype.normalize = function () {\n        var length = this.length();\n        this.x /= length;\n        this.y /= length;\n        return this;\n      };\n      return Point;\n    })();\n    var Particle = (function () {\n      function Particle () {\n        this.position = new Point();\n        this.velocity = new Point();\n        this.acceleration = new Point();\n        this.age = 0;\n      }\n      Particle.prototype.initialize = function (x, y, dx, dy) {\n        this.position.x = x;\n        this.position.y = y;\n        this.velocity.x = dx;\n        this.velocity.y = dy;\n        this.acceleration.x = dx * settings.particles.effect;\n        this.acceleration.y = dy * settings.particles.effect;\n        this.age = 0;\n      };\n      Particle.prototype.update = function (deltaTime) {\n        this.position.x += this.velocity.x * deltaTime;\n        this.position.y += this.velocity.y * deltaTime;\n        this.velocity.x += this.acceleration.x * deltaTime;\n        this.velocity.y += this.acceleration.y * deltaTime;\n        this.age += deltaTime;\n      };\n      Particle.prototype.draw = function (context, image) {\n        function ease (t) {\n          return (--t) * t * t + 1;\n        }\n        var size = image.width * ease(this.age / settings.particles.duration);\n        context.globalAlpha = 1 - this.age / settings.particles.duration;\n        context.drawImage(image, this.position.x - size / 2, this.position.y - size / 2, size, size);\n      };\n      return Particle;\n    })();\n    var ParticlePool = (function () {\n      var particles,\n        firstActive = 0,\n        firstFree = 0,\n        duration = settings.particles.duration;\n\n      function ParticlePool (length) {\n        // 创建和填充粒子库\n        particles = new Array(length);\n        for (var i = 0; i < particles.length; i++)\n          particles[i] = new Particle();\n      }\n      ParticlePool.prototype.add = function (x, y, dx, dy) {\n        particles[firstFree].initialize(x, y, dx, dy);\n\n        // 处理循环队列\n        firstFree++;\n        if (firstFree == particles.length) firstFree = 0;\n        if (firstActive == firstFree) firstActive++;\n        if (firstActive == particles.length) firstActive = 0;\n      };\n      ParticlePool.prototype.update = function (deltaTime) {\n        var i;\n\n        // 更新活动粒子\n        if (firstActive < firstFree) {\n          for (i = firstActive; i < firstFree; i++)\n            particles[i].update(deltaTime);\n        }\n        if (firstFree < firstActive) {\n          for (i = firstActive; i < particles.length; i++)\n            particles[i].update(deltaTime);\n          for (i = 0; i < firstFree; i++)\n            particles[i].update(deltaTime);\n        }\n\n        // 删除不活动的粒子\n        while (particles[firstActive].age >= duration && firstActive != firstFree) {\n          firstActive++;\n          if (firstActive == particles.length) firstActive = 0;\n        }\n\n\n      };\n      ParticlePool.prototype.draw = function (context, image) {\n        // 画活动粒子\n        if (firstActive < firstFree) {\n          for (var i = firstActive; i < firstFree; i++)\n            particles[i].draw(context, image);\n        }\n        if (firstFree < firstActive) {\n          for (i = firstActive; i < particles.length; i++)\n            particles[i].draw(context, image);\n          for (i = 0; i < firstFree; i++)\n            particles[i].draw(context, image);\n        }\n      };\n      return ParticlePool;\n    })();\n    (function (canvas) {\n      var context = canvas.getContext('2d'),\n        particles = new ParticlePool(settings.particles.length),\n        particleRate = settings.particles.length / settings.particles.duration, // particles/sec\n        time;\n\n      // 获取heart点位 -PI <= t <= PI\n      function pointOnHeart (t) {\n        return new Point(\n          160 * Math.pow(Math.sin(t), 3),\n          130 * Math.cos(t) - 50 * Math.cos(2 * t) - 20 * Math.cos(3 * t) - 10 * Math.cos(4 * t) + 25\n        );\n      }\n\n      // 使用canvas创建粒子图像\n      var image = (function () {\n        var canvas = document.createElement('canvas'),\n          context = canvas.getContext('2d');\n        canvas.width = settings.particles.size;\n        canvas.height = settings.particles.size;\n        // 创建路径的辅助函数\n        function to (t) {\n          var point = pointOnHeart(t);\n          point.x = settings.particles.size / 2 + point.x * settings.particles.size / 350;\n          point.y = settings.particles.size / 2 - point.y * settings.particles.size / 350;\n          return point;\n        }\n        // 创建路径\n        context.beginPath();\n        var t = -Math.PI;\n        var point = to(t);\n        context.moveTo(point.x, point.y);\n        while (t < Math.PI) {\n          t += 0.01;\n          point = to(t);\n          context.lineTo(point.x, point.y);\n        }\n        context.closePath();\n        // 填充\n        context.fillStyle = '#ea80b0';\n        context.fill();\n        // 创建图片\n        var image = new Image();\n        image.src = canvas.toDataURL();\n        return image;\n      })();\n\n      // 渲染\n      function render () {\n        requestAnimationFrame(render);\n\n        // update time\n        var newTime = new Date().getTime() / 1000,\n          deltaTime = newTime - (time || newTime);\n        time = newTime;\n\n        // clear canvas\n        context.clearRect(0, 0, canvas.width, canvas.height);\n\n        // 创建新的粒子\n        var amount = particleRate * deltaTime;\n        for (var i = 0; i < amount; i++) {\n          var pos = pointOnHeart(Math.PI - 2 * Math.PI * Math.random());\n          var dir = pos.clone().length(settings.particles.velocity);\n          particles.add(canvas.width / 2 + pos.x, canvas.height / 2 - pos.y, dir.x, -dir.y);\n        }\n\n        // 更新并绘制\n        particles.update(deltaTime);\n        particles.draw(context, image);\n      }\n\n      // 处理canvas大小\n      function onResize () {\n        canvas.width = canvas.clientWidth;\n        canvas.height = canvas.clientHeight;\n      }\n      window.onresize = onResize;\n\n      // 延迟渲染\n      setTimeout(function () {\n        onResize();\n        render();\n      }, 10);\n    })(document.getElementById('pinkboard'));\n\n  },\n  computed: {\n\n  },\n\n  methods: {\n  }\n\n}\n\n</script>\n<style lang=\"less\"  rel=\"stylesheet/less\" scope type=\"text/less\">\n@r: 100;\n.my-index {\n}\n</style>"],"sourceRoot":"src/pages"}]}